<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>GlobalShop.com</title>
  	</h:head>
 	 <h:body>
 	 	<ui:composition template="../templates/userEntryTemplate.xhtml">
 	 		<ui:define name="content">
		   		<div class ='divForm'>
		   			<h:form>
		   				<h:outputLabel value="Name:" for="pw"/>
		   	 			<h:inputText id="name" type="text" value="#{userBean.user.name}" /><br/>
		   	 			
		   	 			<h:outputLabel value="E-Mail:" for="email"/>
		   	 			<h:inputText id="email" type="email" value="#{userBean.user.email}">
		   	 				<f:validator validatorId="webeng.validation.EmailValidator"/>
		   	 			</h:inputText><br/>
		   	 			
		   	 			<h:outputLabel value="Passwort:" for="pw"/>
		   	 			<h:inputSecret id="pw" value="#{userBean.user.password}"/><br/>
		   	 			<h:commandButton id="update" value="Update" action="#{userBean.update}"/>
		 			</h:form>
		 			<h:messages styleClass="error message" showSummary="false" showDetail="true" />
		   		</div>
		   		<div class ='divTransactions'>
		   		
		   			Gekaufte Produkte<br/>
		   			<h:dataTable var="transaction" value="#{transactionBean.transactionsByUser}">
						<h:column>
							<f:facet name="header">Produktbild</f:facet>
							<img src="../resources/products/#{transaction.productId}.jpg" height="100" width="100"/> 
							
						</h:column>
						
						<h:column>
							<f:facet name="header">Produkt</f:facet>
							<h:link outcome="../pages/productview.xhtml" value="#{transaction.productId}">
								<f:param name="product_id" value="#{transaction.productId}"/>
							</h:link> 
						</h:column>
							
						<h:column>
							<f:facet name="header">Anzahl gekauft</f:facet>
							<h:outputText value="#{transaction.quantity}"/>
						</h:column>
						
						<h:column>
							<f:facet name="header">Gesamtpreis</f:facet>
							<h:outputText value="#{transaction.subtotal} â‚¬"/>
						</h:column>
						
						<h:column>
							<f:facet name="header">Kaufdatum</f:facet>
							<h:outputText value="#{transaction.date}"/>
						</h:column>
					</h:dataTable>
		   		</div>
		   	</ui:define>
		</ui:composition>
	 </h:body> 
</html>